#include "msp430f1611.h"

void Config_LCD(); 
  void CLR_LCD();
  void envia_dado();
  void envia_comando();
  void som();
  unsigned char rd_tec();    // Subrotina que devolve a tecla que foi apertada
  void config_teclado();
  unsigned char tecla;      // Variável que possui o valor da última tecla pressionada

  char tempo[] = {'0','0','0'};       //Variavel que ira armazenar o tempo que o usuario definir

void Mostrar(){
  
    P5OUT = 0x80;          // Seleciona a primeira casa do Display na primeira linha
    envia_comando();                             
    for(int u=0;u<3;u++)   // Preenche a primeira linha do dysplay com o tempo
      {
        P5OUT=tempo[u];
        envia_dado();
      } 
    P5OUT=0x83;            // Limpa o resto da linha do display
    envia_comando()
    for(int u=0;u<13;u++)
      {
        P5OUT=' ';
        envia_dado();
      } 
  
    P5OUT = 0xC0;         // Seleciona a primeira casa do Display na segunda linha
    envia_comando();
    for(int u=0;u<3;u++)
      {
        P5OUT=tempo[u];
        envia_dado();
      } 
    P5OUT=0x83;           // Limpa o resto da linha do display
    envia_comando();
    for(int u=0;u<13;u++)
      {
        P5OUT=' ';
        envia_dado();
      } 
  
  
}

void main()
{WDTCTL = WDTPW + WDTHOLD;      // Stop watchdog timer to prevent time out reset


    Config_LCD();
    config_teclado();
    CCTL0 = CCIE;                // CCR0 interrupt enabled   
    CCR0 = 32767;   
    TACTL = TASSEL_1 + MC_1;     // ACLK, upmode  
    _BIS_SR(GIE);                //  habilita interrupção
    P1DIR=0x01;                  // Saída do alarme
    digito=0;                    // Indica a posição dos digitos que serão sobrescrevidos
    while (1)
    {
      Mostrar();
    }
}
